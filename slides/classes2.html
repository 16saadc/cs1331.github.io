<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="CS 1331">
  <title>Classes, Part 2</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="reveal.js/css/reveal.css">
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="reveal.js/css/theme/gt.css" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="reveal.js/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
  <h1 class="title">Classes, Part 2</h1>
  <h2 class="author">CS 1331</h2>
</section>

<section id="classes-part-2" class="slide level1">
<h1>Classes, Part 2</h1>
<center>
<img src="AceofBaseTheSignAlbumcover.jpg" />
</center>
<p>Source: <a href="http://en.wikipedia.org/wiki/File:AceofBaseTheSignAlbumcover.jpg">Wikipedia</a></p>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="progress-check" class="slide level1">
<h1>Progress Check</h1>
<p>Let's review our progress with our Card class design:</p>
<ul>
<li>We have a nice string representation of Card objects (<code>Card</code> v0.1).</li>
<li>We have encapsulated the rank and suit in private instance variables (<code>Card</code> v1.0) with mutator methods (<code>Card</code> v1.2) to set their values.</li>
<li>We validate the rank and suit in the mutator methods so we can't set invalid ranks and suits in Card objects (<code>Card</code> v1.3).</li>
<li><code>Card</code> v2.0 has a constructor, which ensures that instance variables are initialized when an instance of <code>Card</code> v2.0 is created.</li>
</ul>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="static-members-card-v2.1" class="slide level1">
<h1>Static Members, Card v2.1</h1>
<p>Do we need a separate instance of <code>VALID_RANKS</code> and <code>VALID_SUITS</code> for each instance of our Card class?</p>
<p><code>static</code> members are shared with all instances of a class:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> String[] VALID_RANKS =
    {<span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>, <span class="st">&quot;4&quot;</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>, <span class="st">&quot;7&quot;</span>, <span class="st">&quot;8&quot;</span>, <span class="st">&quot;9&quot;</span>,
     <span class="st">&quot;10&quot;</span>, <span class="st">&quot;jack&quot;</span>, <span class="st">&quot;queen&quot;</span>, <span class="st">&quot;king&quot;</span>, <span class="st">&quot;ace&quot;</span>};
<span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> String[] VALID_SUITS =
    {<span class="st">&quot;diamonds&quot;</span>, <span class="st">&quot;clubs&quot;</span>, <span class="st">&quot;hearts&quot;</span>,<span class="st">&quot;spades&quot;</span>};</code></pre></div>
<p>Given the declarations above:</p>
<ul>
<li>Each instance shares a single copy of <code>VALID_RANKS</code> and a single copy of <code>VALID_SUITS</code></li>
<li>Since they're <code>final</code>, we can safely make them <code>public</code> so clients of our Card class can use them</li>
</ul>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="one-final-enhancement" class="slide level1">
<h1>One Final Enhancement</h1>
<p><code>Card</code> v2.1 is pretty good, but we can write code like this:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> Dealer {

    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span>(String[] args) {
        Card c = <span class="kw">new</span> <span class="fu">Card</span>(<span class="st">&quot;queen&quot;</span>, <span class="st">&quot;hearts&quot;</span>);
        System.<span class="fu">out</span>.<span class="fu">println</span>(c);
        c.<span class="fu">setRank</span>(<span class="st">&quot;jack&quot;</span>); <span class="co">// modifying c</span>
        System.<span class="fu">out</span>.<span class="fu">println</span>(c);
    }
}</code></pre></div>
<p>Does this make sense? Should Card objects be mutable?</p>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="immutable-objects" class="slide level1">
<h1>Immutable Objects</h1>
<p>Card objects don't change. We can model this behavior by removing the setters and putting the initialization code in the constructor (or making the setters private and calling them from the constructor):</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="fu">Card</span>(String aRank, String aSuit) { <span class="co">// constructor</span>
  <span class="kw">if</span> (!<span class="fu">isValidRank</span>(rank)) {
    System.<span class="fu">out</span>.<span class="fu">println</span>(aRank + <span class="st">&quot; is not a valid rank.&quot;</span>);
    System.<span class="fu">exit</span>(<span class="dv">0</span>);
  }
  rank = aRank;
  <span class="kw">if</span> (!<span class="fu">isValidSuit</span>(aSuit)) {
    System.<span class="fu">out</span>.<span class="fu">println</span>(aSuit + <span class="st">&quot; is not a valid suit.&quot;</span>);
    System.<span class="fu">exit</span>(<span class="dv">0</span>);
  }
  suit = aSuit;
}</code></pre></div>
<p>Note the use of another idiom for disambiguating constructor paramters from instance variables (as opposed to using <code>this</code>).</p>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="designing-immutable-classes" class="slide level1">
<h1>Designing Immutable Classes</h1>
<p>An immutable class is a class whose instances cannot be modified. To make a class immutable:</p>
<ul>
<li>Don't provide mutator methods (&quot;setters&quot;)</li>
<li>Make the class <code>final</code> so it can't be extended (there's another way to accomplish this, but making the class <code>final</code> is good enough for now)</li>
<li>Make all fields <code>final</code></li>
<li>Make all fields <code>private</code></li>
<li>For fields of mutable class types, return defensive copies in accessor methods (we'll discuss this later)</li>
</ul>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="prefer-immutable-classes" class="slide level1">
<h1>Prefer Immutable Classes</h1>
<p>In general, make your classes immutable unless you have a good reason to make them mutable. Why? Because immutable objects</p>
<ul>
<li>are simpler to design becuase you don't have to worry about enforcing class invariants in multiple places,</li>
<li>are easier to reason about because the state of an object never changes after instantiation,</li>
<li>are inherently thread-safe becuase access to mutable data need not be syncronized, and</li>
<li>enable safe instance sharing, so redundant copies need not be created.</li>
</ul>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="a-few-final-bits-of-polish" class="slide level1">
<h1>A Few Final Bits of Polish</h1>
<p>Take a look at the final evolution of our Card class. It contains a few more enhancements:</p>
<ul>
<li>Instead of simply terminating the program, the constructor throws <code>IllegalArgumentException</code> on invalid input so that client code can choose to deal with the exception at run-time.</li>
<li>Input is normalized to lower case and spaces trimmed to make the Card object robust to oddly formatted input.</li>
<li>It has an <code>equals()</code> method.</li>
</ul>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="equality" class="slide level1">
<h1>Equality</h1>
<ul>
<li><code>==</code> means identity equality (aliasing) for reference types (objects).</li>
<li>The <code>equals(Object)</code> tests value equality for objects.</li>
</ul>
<p>Given our finished Card class with a properly implemented <code>equals(Object)</code> method, this code:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">  Card c1 = <span class="kw">new</span> <span class="fu">Card</span>(<span class="st">&quot;ace&quot;</span>, <span class="st">&quot;spades&quot;</span>);
  Card c2 = <span class="kw">new</span> <span class="fu">Card</span>(<span class="st">&quot;ace&quot;</span>, <span class="st">&quot;spades&quot;</span>);
  Card c3 = c1;
  System.<span class="fu">out</span>.<span class="fu">println</span>(<span class="st">&quot;c1 == c2 returns &quot;</span> + (c1 == c2));
  System.<span class="fu">out</span>.<span class="fu">println</span>(<span class="st">&quot;c1.equals(c2) returns &quot;</span> + c1.<span class="fu">equals</span>(c2));
  System.<span class="fu">out</span>.<span class="fu">println</span>(<span class="st">&quot;c1 == c3 returns &quot;</span> + (c1 == c3));
  System.<span class="fu">out</span>.<span class="fu">println</span>(<span class="st">&quot;c1.equals(c3) returns &quot;</span> + c1.<span class="fu">equals</span>(c3));</code></pre></div>
<p>produces this output:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">  c1 == c2 returns <span class="kw">false</span>
  c1.<span class="fu">equals</span>(c2) returns <span class="kw">true</span>
  c1 == c3 returns <span class="kw">true</span>
  c1.<span class="fu">equals</span>(c3) returns <span class="kw">true</span></code></pre></div>
<p>By the way, what if we left off the parentheses around <code>c1 == c2</code> in <code>System.out.println(&quot;c1 == c2 returns &quot; + (c1 == c2))</code>?</p>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="review-question-1" class="slide level1">
<h1>Review Question 1</h1>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> Kitten {
    <span class="kw">private</span> String name;

    <span class="kw">public</span> <span class="fu">Kitten</span>(String name) {
        name = name;
    }
    <span class="kw">public</span> String <span class="fu">toString</span>() {
        <span class="kw">return</span> <span class="st">&quot;Kitten: &quot;</span> + name;
    }
}</code></pre></div>
<p>Assume the following statements have been executed:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">        Kitten maggie = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Maggie&quot;</span>);
        Kitten fiona = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Fiona&quot;</span>);
        Kitten fiona2 = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Fiona&quot;</span>);</code></pre></div>
<p>What is the value of <code>maggie</code>?</p>
<ul>
<li>?</li>
</ul>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="review-question-1-answer" class="slide level1">
<h1>Review Question 1 Answer</h1>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> Kitten {
    <span class="kw">private</span> String name;

    <span class="kw">public</span> <span class="fu">Kitten</span>(String name) {
        name = name;
    }
    <span class="kw">public</span> String <span class="fu">toString</span>() {
        <span class="kw">return</span> <span class="st">&quot;Kitten: &quot;</span> + name;
    }
}</code></pre></div>
<p>Assume the following statements have been executed:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">        Kitten maggie = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Maggie&quot;</span>);
        Kitten fiona = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Fiona&quot;</span>);
        Kitten fiona2 = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Fiona&quot;</span>);</code></pre></div>
<p>What is the value of <code>maggie</code>?</p>
<ul>
<li>the address of a <code>Kitten</code> object</li>
</ul>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="review-question-2" class="slide level1">
<h1>Review Question 2</h1>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> Kitten {
    <span class="kw">private</span> String name;

    <span class="kw">public</span> <span class="fu">Kitten</span>(String name) {
        name = name;
    }
    <span class="kw">public</span> String <span class="fu">toString</span>() {
        <span class="kw">return</span> <span class="st">&quot;Kitten: &quot;</span> + name;
    }
}</code></pre></div>
<p>Assume the following statements have been executed:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">        Kitten maggie = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Maggie&quot;</span>);
        Kitten fiona = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Fiona&quot;</span>);
        Kitten fiona2 = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Fiona&quot;</span>);</code></pre></div>
<p>What does <code>maggie.toString()</code> return?</p>
<ul>
<li>?</li>
</ul>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="review-question-2-answer" class="slide level1">
<h1>Review Question 2 Answer</h1>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> Kitten {
    <span class="kw">private</span> String name;

    <span class="kw">public</span> <span class="fu">Kitten</span>(String name) {
        name = name;
    }
    <span class="kw">public</span> String <span class="fu">toString</span>() {
        <span class="kw">return</span> <span class="st">&quot;Kitten: &quot;</span> + name;
    }
}</code></pre></div>
<p>Assume the following statements have been executed:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">        Kitten maggie = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Maggie&quot;</span>);
        Kitten fiona = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Fiona&quot;</span>);
        Kitten fiona2 = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Fiona&quot;</span>);</code></pre></div>
<p>What does <code>maggie.toString()</code> return?</p>
<ul>
<li><code>&quot;Kitten: null&quot;</code></li>
</ul>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="review-question-3" class="slide level1">
<h1>Review Question 3</h1>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> Kitten {
    <span class="kw">private</span> String name;

    <span class="kw">public</span> <span class="fu">Kitten</span>(String name) {
        name = name;
    }
    <span class="kw">public</span> String <span class="fu">toString</span>() {
        <span class="kw">return</span> <span class="st">&quot;Kitten: &quot;</span> + name;
    }
}</code></pre></div>
<p>Assume the following statements have been executed:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">        Kitten maggie = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Maggie&quot;</span>);
        Kitten fiona = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Fiona&quot;</span>);
        Kitten fiona2 = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Fiona&quot;</span>);</code></pre></div>
<p>What is the value of the expression <code>fiona == fiona2</code>?</p>
<ul>
<li>?</li>
</ul>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="review-question-3-answer" class="slide level1">
<h1>Review Question 3 Answer</h1>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> Kitten {
    <span class="kw">private</span> String name;

    <span class="kw">public</span> <span class="fu">Kitten</span>(String name) {
        name = name;
    }
    <span class="kw">public</span> String <span class="fu">toString</span>() {
        <span class="kw">return</span> <span class="st">&quot;Kitten: &quot;</span> + name;
    }
}</code></pre></div>
<p>Assume the following statements have been executed:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">        Kitten maggie = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Maggie&quot;</span>);
        Kitten fiona = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Fiona&quot;</span>);
        Kitten fiona2 = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Fiona&quot;</span>);</code></pre></div>
<p>What is the value of the expression <code>fiona == fiona2</code>?</p>
<ul>
<li><code>false</code></li>
</ul>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="review-question-4" class="slide level1">
<h1>Review Question 4</h1>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> Kitten {
    <span class="kw">private</span> String name;

    <span class="kw">public</span> <span class="fu">Kitten</span>(String name) {
        name = name;
    }
    <span class="kw">public</span> String <span class="fu">toString</span>() {
        <span class="kw">return</span> <span class="st">&quot;Kitten: &quot;</span> + name;
    }
}</code></pre></div>
<p>Assume the following statements have been executed:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">        Kitten maggie = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Maggie&quot;</span>);
        Kitten[] kittens = <span class="kw">new</span> Kitten[<span class="dv">5</span>];</code></pre></div>
<p>What is the value of <code>kittens[0]</code> ?</p>
<ul>
<li>?</li>
</ul>
<!------------------------------------ Slide -------------------------------->
</section>
<section id="review-question-4-answer" class="slide level1">
<h1>Review Question 4 Answer</h1>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> Kitten {
    <span class="kw">private</span> String name;

    <span class="kw">public</span> <span class="fu">Kitten</span>(String name) {
        name = name;
    }
    <span class="kw">public</span> String <span class="fu">toString</span>() {
        <span class="kw">return</span> <span class="st">&quot;Kitten: &quot;</span> + name;
    }
}</code></pre></div>
<p>Assume the following statements have been executed:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">        Kitten maggie = <span class="kw">new</span> <span class="fu">Kitten</span>(<span class="st">&quot;Maggie&quot;</span>);
        Kitten[] kittens = <span class="kw">new</span> Kitten[<span class="dv">5</span>];</code></pre></div>
<p>What is the value of <code>kittens[0]</code> ?</p>
<ul>
<li><code>null</code></li>
</ul>
</section>
    </div>
  </div>

  <script src="reveal.js/lib/js/head.min.js"></script>
  <script src="reveal.js/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display a presentation progress bar
        progress: true,
        // Display the page number of the current slide
        slideNumber: true,

        // Optional reveal.js plugins
        dependencies: [
          { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
          { src: 'reveal.js/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
